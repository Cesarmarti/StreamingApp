<html>
	<body>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
		<script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
		<script>
	  		$().ready(function() {
	  			$.get( "retrieve_movies", function( data ) {
	  				indicators(data);
				  	//var list = document.getElementById("movieList");
				  	var carouselMain = document.getElementById("carousel-inner-main");
				  	var counter = 0;
				  	data.forEach(movie => {
				  		/*var node = document.createElement("LI");
				  		var link = document.createElement('a');
						link.textContent = movie;
						link.href="/picker/watch/"+movie;
						link.id='movie_choice';
						node.appendChild(link);
						list.appendChild(node);*/

						var mainDiv = document.createElement("div");
						if(counter==0)
							mainDiv.className ="carousel-item active";
						else
							mainDiv.className ="carousel-item"
						var divView = document.createElement("div");
						var divCaption = document.createElement("div");
						divView.className = "view";
						divCaption.className = "carousel-caption";

						var img = document.createElement("img");
						img.src = "/images/"+movie;
						img.className = "d-block w-100";
						var light = document.createElement("div");
						light.className = "mask rgba-black-light";
						divView.appendChild(img);
						divView.appendChild(light);

						var title = document.createElement("h3");
						title.className ="h3-responsive";
						var t = document.createTextNode(movie);
						title.appendChild(t);
						divCaption.appendChild(title);
						var par = document.createElement("p");
						var link = document.createElement("a");
						link.className = "btn btn-lg btn-primary";
						link.href = "/picker/watch/"+movie;
						link.dataset.role = "button";
						var text = document.createTextNode("Watch");
						link.appendChild(text);
						par.appendChild(link);
						divCaption.appendChild(par);

						mainDiv.appendChild(divView);
						mainDiv.appendChild(divCaption);
						carouselMain.appendChild(mainDiv);
						counter++;
				  	});
				});
			});

			//makes the indicator buttons
	  		function indicators(data){
	  			var ol = document.createElement("ol");
				ol.className="carousel-indicators";
				var mainDiv = document.getElementById("carousel-main");
				var counter = 0;
				data.forEach(movie=>{
					var li = document.createElement("li");
					li.dataset.target="#carousel-main";
					if(counter==0)
						li.className="active";
					li.dataset.slideTo=counter;
					counter++;
					ol.appendChild(li);
				})
				mainDiv.appendChild(ol);
	  		}
	  	</script>  
      	<h3>Movie list</h3>
      	<ul id="movieList">
		</ul>

	  	<!--Carousel Wrapper-->
		<div id="carousel-main" class="carousel slide carousel-fade" data-ride="carousel">
		  <!--Indicators-->
		  <ol class="carousel-indicators">
		    <li data-target="#carousel-main" data-slide-to="0" class="active"></li>
		    <li data-target="#carousel-main" data-slide-to="1"></li>
		    <li data-target="#carousel-main" data-slide-to="2"></li>
		  </ol>
		  <!--/.Indicators-->
		  <!--Slides-->
		  <div id="carousel-inner-main" class="carousel-inner" role="listbox">
		    <div class="carousel-item active">
		      <div class="view">
		        <img class="d-block w-100" src="/images/rando">
		        <div class="mask rgba-black-light"></div>
		      </div>
		      <div class="carousel-caption">
		        <h3 class="h3-responsive">Spiderman</h3>
		        <p>First text</p>
		        <p><a class="btn btn-lg btn-primary" href="#" role="button">Watch</a></p>
		      </div>
		    </div>
		    <div class="carousel-item">
		      <!--Mask color-->
		      <div class="view">
		        <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(6).jpg"
		          alt="Second slide">
		        <div class="mask rgba-black-strong"></div>
		      </div>
		      <div class="carousel-caption">
		        <h3 class="h3-responsive">Strong mask</h3>
		        <p>Secondary text</p>
		      </div>
		    </div>
		    <div class="carousel-item">
		      <!--Mask color-->
		      <div class="view">
		        <img class="d-block w-100" src="https://mdbootstrap.com/img/Photos/Slides/img%20(9).jpg"
		          alt="Third slide">
		        <div class="mask rgba-black-slight"></div>
		      </div>
		      <div class="carousel-caption">
		        <h3 class="h3-responsive">Slight mask</h3>
		        <p>Third text</p>
		      </div>
		    </div>
		  </div>
		  <!--/.Slides-->
		  <!--Controls-->
		  <a class="carousel-control-prev" href="#carousel-main" role="button" data-slide="prev">
		    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		    <span class="sr-only">Previous</span>
		  </a>
		  <a class="carousel-control-next" href="#carousel-main" role="button" data-slide="next">
		    <span class="carousel-control-next-icon" aria-hidden="true"></span>
		    <span class="sr-only">Next</span>
		  </a>
		  <!--/.Controls-->
		</div>
		<!--/.Carousel Wrapper-->
	</body>
</html>